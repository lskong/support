# 什么是纠删码

## 纠删码
纠删码（Erasuer Coding, EC）起源于通讯系统，是目前在存储系统中广泛使用的一种数据保护机制。
## 分片机制
它将“原始数据”进行分片，然后基于分片编码生成“备份数据”，最后将“原始数据”和“备份数据”分别写入不同的存储介质。

## 逆运算/解码
EC数据恢复是分片编码的逆运算，因此也叫解码。

## 容错能力
容错能力取决于生成备份数据的份数(或多少)，也就是系统同时允许失效的最大存储介质数量。

## 条带（Stripe）
条带（Stripe）：是把连续的数据分割成相同大小的数据块，把每段数据分别写入到阵列中的不同磁盘上的方法。
条带宽度：是指单个条带所跨过的磁盘个数，也称为条带长度。
条带深度：是指单个条带在单个磁盘上分配的字节数，一般为磁盘的基本块（访问磁盘最小粒度，如扇区）的整数倍。
条带化：是指将数据分为相同大小的数据块，这些条带分布在不同的物理磁盘上
条带化技术：条带化技术就是一种自动的将 I/O 的负载均衡到多个物理磁盘上的技术。


## RAID（磁盘阵列）
raid0是RAID的一种工作模式，又称为Stripe或Striping，是所有RAID级别中最高的存储性能。raid0可以实现非常大的分区空间和极佳的读写速度。一个由 n 块磁盘组成的raid0 ，它的读写性能是单个磁盘性能的 n 倍，但由于总线带宽等多种因素的限制，实际的性能提升低于理论值。RAID0 具有低成本、高读写性能、 100% 的高存储空间利用率等优点，但是它不提供数据冗余保护，一旦数据损坏，将无法恢复。 因此， RAID0 一般适用于对性能要求严格但对数据安全性和可靠性不高的应用，如视频、音频存储、临时数据缓存空间等。


## RS-RAID和Jerasure
RS-RAID用户实现高阶RAID，是RAID技术工业上的规范。参考前面，纠删码是一类具有数据保护能力的编码方法的统称，因此RS-RAID也是纠删码的一种具体实现。Jerasure就基于具体实现的开源项目中的一种。
Jerasuer所实现的纠删码是水平方式，即需求同时使用k+m块不同的磁盘分别承载数据和校验数据（分别对应数据盘和校验盘）。

## 纠删码在Ceph中的应用
Ceph基于存储池存储数据，按照数据保护方式将存储分为两类：多副本和纠删码。在Ceph中纠删码是以插件的形式提供服务，目前默认采用Jerasure插件。典型的如ISA（Intel Storage Acceleration）,
而在多副本中副本数使用字母N来表示，如果在EC中出现N+M,这个N指的就是K（数据盘）